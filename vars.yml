---

# AWS Credentials
aws_access_key: "{{ lookup('env', 'AWS_ACCESS_KEY_ID') }}"
aws_secret_key: "{{ lookup('env', 'AWS_SECRET_ACCESS_KEY') }}"
# http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region
aws_region:     "us-west-2"
aws_ec2_url:    "http://ec2.us-west-2.amazonaws.com" 

# VPC Information
vpc_name:       "My VPC"
vpc_cidr_block: "10.0.0.0/16"

# For Security Group Rule
my_ip:          "10.2.3.4"

key_name: "example"
key_files: "~/.ssh/aws_rsa"

database_user: "root"
database_passwd: "root"

# Subnets
public_subnet_1_cidr:  "10.0.0.0/24"

# Security Groups
security_group:
  - name: ssh_enable
    desc: the security group for the ssh
    rules:
      - proto: tcp
        from_port: 22
        to_port: 22
        cidr_ip: 0.0.0.0/0

  - name: mysql
    desc: the security group for the mysql
    rules:
      - proto: tcp
        from_port: 3306
        to_port: 3306
        cidr_ip: 0.0.0.0/0

  - name: postgres
    desc: the security group for the postgres
    rules:
      - proto: tcp
        from_port: 5432
        to_port: 5432
        cidr_ip: 0.0.0.0/0

ec2_instances:
  - image: ami-0c2aba6c
    instance_type: t2.nano
    group: ssh_enable,mysql,postgres
    instance_tags: 
        Name: database
    exact_count: 1
    count_tag: 
        Name: database
    vpc_subnet_id: "{{ public_subnet_id }}"
    region: "{{ aws_region }}"
    ec2_url: "{{ aws_ec2_url }}"
    assign_public_ip: yes
    key_name: "{{ key_name }}"